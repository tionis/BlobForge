<tr id="job-{{.Job.ID}}" class="hover:bg-gray-50">
    <td class="px-4 py-3 text-sm">
        <a href="/jobs/{{.Job.ID}}" class="text-indigo-600 hover:text-indigo-800 font-medium">#{{.Job.ID}}</a>
    </td>
    <td class="px-4 py-3 text-sm">{{.Job.Type}}</td>
    <td class="px-4 py-3 text-sm">
        <span class="px-2 py-1 text-xs rounded-full {{statusBg .Job.Status}} {{statusColor .Job.Status}}">
            {{.Job.Status}}
        </span>
    </td>
    <td class="px-4 py-3 text-sm {{priorityColor .Job.Priority}}">{{priorityLabel .Job.Priority}}</td>
    <td class="px-4 py-3 text-sm text-gray-500" title="{{.Job.SourceHash}}">{{truncate .Job.SourceHash 12}}</td>
    <td class="px-4 py-3 text-sm text-gray-500">{{.Job.Attempts}}/{{.Job.MaxAttempts}}</td>
    <td class="px-4 py-3 text-sm text-gray-500">{{timeAgo (addr .Job.UpdatedAt)}}</td>
    <td class="px-4 py-3 text-sm">
        <div class="flex space-x-2">
            {{if or (eq .Job.Status "failed") (eq .Job.Status "dead") (eq .Job.Status "cancelled")}}
            <button 
                hx-post="/actions/jobs/{{.Job.ID}}/retry" 
                hx-target="#job-{{.Job.ID}}"
                hx-swap="outerHTML"
                class="text-indigo-600 hover:text-indigo-800 text-xs"
                title="Retry job">
                ↻ Retry
            </button>
            {{end}}
            {{if eq .Job.Status "pending"}}
            <button 
                hx-post="/actions/jobs/{{.Job.ID}}/cancel" 
                hx-target="#job-{{.Job.ID}}"
                hx-swap="outerHTML"
                hx-confirm="Are you sure you want to cancel this job?"
                class="text-red-600 hover:text-red-800 text-xs"
                title="Cancel job">
                ✕ Cancel
            </button>
            {{end}}
        </div>
    </td>
</tr>
