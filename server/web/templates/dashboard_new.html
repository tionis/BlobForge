{{template "base" .}}

{{define "content"}}
<div class="page-header">
    <h1 class="page-title">Dashboard</h1>
</div>

<!-- Stats Cards -->
<div id="stats" hx-get="/partials/stats" hx-trigger="every 10s, sse:stats_updated" hx-swap="innerHTML">
    {{template "stats_cards.html" .}}
</div>

<div class="grid-2">
    <!-- Recent Jobs -->
    <div class="card">
        <div class="card-header">
            <h2>Recent Jobs</h2>
            <a href="/jobs" class="link">View all →</a>
        </div>
        <div class="card-body" id="recent-jobs" 
             hx-get="/partials/jobs?limit=10" 
             hx-trigger="every 10s, sse:job_created, sse:job_updated, sse:job_completed, sse:job_failed" 
             hx-swap="innerHTML">
            {{template "jobs_table.html" (dict "Jobs" .RecentJobs "Compact" true)}}
        </div>
    </div>

    <!-- Workers -->
    <div class="card">
        <div class="card-header">
            <h2>Workers</h2>
            <a href="/workers" class="link">Manage →</a>
        </div>
        <div class="card-body" id="workers" 
             hx-get="/partials/workers" 
             hx-trigger="every 10s, sse:worker_online, sse:worker_offline" 
             hx-swap="innerHTML">
            {{template "workers_table.html" .}}
        </div>
    </div>
</div>
{{end}}
